(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);h&&h(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},n={app:0},a=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"034c":function(t,e,i){"use strict";var s=i("22b1"),n=i.n(s);n.a},"0e7b":function(t,e,i){},1396:function(t,e,i){},"22b1":function(t,e,i){},"2f29":function(t,e,i){},"38c6":function(t,e,i){"use strict";var s=i("ae95"),n=i.n(s);n.a},"3d95":function(t,e,i){},"4ab9":function(t,e,i){},"52d0":function(t,e,i){"use strict";var s=i("c65f"),n=i.n(s);n.a},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},"64a3":function(t,e,i){"use strict";var s=i("72d8"),n=i.n(s);n.a},6658:function(t,e,i){"use strict";var s=i("1396"),n=i.n(s);n.a},"6d0f":function(t,e,i){},"72d8":function(t,e,i){},"7e08":function(t,e,i){},"8d8e":function(t,e,i){"use strict";var s=i("6d0f"),n=i.n(s);n.a},"90b9":function(t,e,i){"use strict";var s=i("d119"),n=i.n(s);n.a},"930e":function(t,e,i){"use strict";var s=i("c4c8"),n=i.n(s);n.a},"9a5a":function(t,e,i){"use strict";var s=i("2f29"),n=i.n(s);n.a},"9c0c":function(t,e,i){},a04a:function(t,e,i){"use strict";var s=i("7e08"),n=i.n(s);n.a},a36d:function(t,e,i){"use strict";var s=i("3d95"),n=i.n(s);n.a},ae95:function(t,e,i){},bde9:function(t,e,i){"use strict";var s=i("4ab9"),n=i.n(s);n.a},c4c8:function(t,e,i){},c65f:function(t,e,i){},c83a:function(t,e,i){"use strict";var s=i("0e7b"),n=i.n(s);n.a},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Editor")],1)},a=[],o=i("d4ec"),r=i("262e"),c=i("2caf"),l=i("9ab4"),h=i("60a3"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor"},[i("header",{staticClass:"fancy"},[t._m(0),i("div",{staticClass:"tabs"},[i("div",{staticClass:"tab",class:{selected:0==t.selectedTab},on:{click:function(e){t.selectedTab=0}}},[t._v(" Create ")]),i("div",{staticClass:"tab",class:{selected:1==t.selectedTab},on:{click:function(e){t.selectedTab=1}}},[t._v(" Composite ")]),i("div",{staticClass:"tab",class:{selected:2==t.selectedTab},on:{click:function(e){t.selectedTab=2}}},[t._v(" Render ")])])]),i("div",{staticClass:"content"},[0==t.selectedTab?i("FractalEditor"):t._e(),1==t.selectedTab?i("FractalComposite"):t._e(),2==t.selectedTab?i("FractalRender"):t._e()],1)])},d=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[i("div",{staticClass:"logo-text"},[t._v("Fractal Editor")])])}],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"fractal-editor"},[i("FractalWindow",{attrs:{state:t.state}}),i("FractalEditorPreviewSettings",{attrs:{state:t.state}}),i("FractalEditorToolSelection",{attrs:{state:t.state}})],1)},f=[],p=i("bee2"),g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fractal-editor-preview-settings"},[i("div",{staticClass:"heading"},[t._v(" Preview Settings ")]),i("div",{staticClass:"settings"},[i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Vertices")]),i("Checkbox",{attrs:{checked:t.state.showVertices},on:{"update:checked":t.toggleShowVertices}})],1),i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Grid")]),i("Checkbox",{attrs:{checked:t.state.showGrid},on:{"update:checked":t.toggleShowGrid}})],1),i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Iterations")]),i("NumberSelector",{attrs:{value:t.state.iterations},on:{"update:value":t.setIterations}})],1)])])},y=[],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"checkbox",class:{checked:t.internalChecked},on:{click:t.toggle}})},m=[],k=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.internalChecked=!1,t}return Object(p["a"])(i,[{key:"mounted",value:function(){this.internalChecked=this.checked}},{key:"toggle",value:function(){this.internalChecked=!this.internalChecked,this.$emit("update:checked",this.internalChecked)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])({default:!1})],k.prototype,"checked",void 0),k=Object(l["a"])([h["a"]],k);var w=k,S=w,C=(i("64a3"),i("2877")),x=Object(C["a"])(S,b,m,!1,null,"52c13e58",null),O=x.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"number-selector"},[i("span",{staticClass:"box icon-minus",on:{click:t.decrease}}),i("span",{staticClass:"value"},[t._v(t._s(t.value))]),i("span",{staticClass:"box icon-plus",on:{click:t.increase}})])},_=[],P=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.internalValue=0,t}return Object(p["a"])(i,[{key:"mounted",value:function(){this.internalValue=this.value}},{key:"increase",value:function(){this.internalValue++,this.internalValue>this.max&&(this.internalValue=this.max),this.sync()}},{key:"decrease",value:function(){this.internalValue--,this.internalValue<this.min&&(this.internalValue=this.min),this.sync()}},{key:"sync",value:function(){this.$emit("update:value",this.internalValue)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])({default:0})],P.prototype,"min",void 0),Object(l["a"])([Object(h["b"])({default:1e4})],P.prototype,"max",void 0),Object(l["a"])([Object(h["b"])({default:0})],P.prototype,"value",void 0),P=Object(l["a"])([h["a"]],P);var T=P,E=T,M=(i("9a5a"),Object(C["a"])(E,j,_,!1,null,"d24e52e0",null)),F=M.exports,$=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.iterations=4,t}return Object(p["a"])(i,[{key:"toggleShowVertices",value:function(t){this.state.showVertices=t,this.state.onFractalChange.emit()}},{key:"toggleShowGrid",value:function(t){this.state.showGrid=t,this.state.onFractalChange.emit()}},{key:"setIterations",value:function(t){this.state.iterations=t,this.state.onFractalChange.emit()}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],$.prototype,"state",void 0),$=Object(l["a"])([Object(h["a"])({components:{Checkbox:O,NumberSelector:F}})],$);var D=$,V=D,W=(i("a36d"),Object(C["a"])(V,g,y,!1,null,"504364e0",null)),R=W.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fractal-editor-tool-selection"},[i("div",{staticClass:"tools"},[i("div",{staticClass:"tool",class:{active:0==t.selectedTab},on:{click:function(e){t.selectedTab=0}}},[i("span",{staticClass:"icon-mouse-pointer"})]),i("div",{staticClass:"tool",class:{active:1==t.selectedTab},on:{click:function(e){t.selectedTab=1}}},[i("span",{staticClass:"icon-plus"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.selectedTab,expression:"selectedTab == 0"}],staticClass:"settings"},[t._m(0),t.state.hasSelectedShape?i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Recursive")]),i("Checkbox",{attrs:{checked:t.isRecursive},on:{"update:checked":t.toggleRecursive}})],1):t._e(),t.state.hasSelectedShape?i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Draw Self")]),i("Checkbox",{attrs:{checked:t.hasDrawSelf},on:{"update:checked":t.toggleDrawSelf}})],1):t._e(),t.state.hasSelectedShape?i("div",{staticClass:"setting"},[i("div",{staticClass:"button-secondary",on:{click:t.flip}},[t._v(" Flip ")]),i("div",{staticClass:"button-secondary",on:{click:t.del}},[t._v(" Delete ")])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.selectedTab,expression:"selectedTab == 1"}],staticClass:"settings"},[t._m(1),i("div",{staticClass:"setting"},[i("div",{staticClass:"button-secondary",on:{click:t.add}},[t._v(" Add ")])])])])},B=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("span",{staticClass:"icon-info"}),t._v(" Edit the fractal shape ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("span",{staticClass:"icon-info"}),t._v(" Add a new part to the fractal ")])}],N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"dropdown",on:{click:t.toggle}},[i("span",[t._v(t._s(t.capitalize(t.selected)))]),i("span",{staticClass:"icon icon-chevron-down"}),i("div",{staticClass:"dropdown-container",class:{open:t.open}},t._l(t.list,(function(e,s){return i("div",{key:e,staticClass:"dropdown-element",on:{click:function(e){return t.select(s)}}},[t._v(" "+t._s(t.capitalize(e))+" ")])})),0)])},z=[],q=(i("fb6a"),i("d3b7"),i("25f0"),function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.open=!1,t.internalSelected="",t}return Object(p["a"])(i,[{key:"toggle",value:function(){this.open=!this.open}},{key:"close",value:function(){this.open=!1}},{key:"select",value:function(t){this.internalSelected=this.list[t],this.$emit("update:selected",this.internalSelected),this.$emit("change",this.internalSelected)}},{key:"mounted",value:function(){this.internalSelected=this.selected}},{key:"capitalize",value:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}}]),i}(h["c"]));Object(l["a"])([Object(h["b"])({default:[]})],q.prototype,"list",void 0),Object(l["a"])([Object(h["b"])({default:""})],q.prototype,"selected",void 0),q=Object(l["a"])([h["a"]],q);var I,L=q,U=L,Y=(i("f250"),Object(C["a"])(U,N,z,!1,null,"55c2cf4c",null)),X=Y.exports,H=(i("4160"),i("c975"),i("a434"),i("b0c0"),i("4c53"),i("159b"),function(){function t(e,i){Object(o["a"])(this,t),this.x=e||0,this.y=i||0}return Object(p["a"])(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"assign",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"normalize",value:function(){var t=this.length();return this.x/=t,this.y/=t,this}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"mul",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"div",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"perp",value:function(){var t=this.x;return this.x=this.y,this.y=-t,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"distance",value:function(t){return t.clone().sub(this).length()}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lineDistanceSigned",value:function(t,e){var i=e.clone().sub(t),s=i.length();i.normalize();var n=i.clone().perp(),a=this.clone().sub(t),o=i.dot(a);return o<0?this.distance(t):o>s?this.distance(e):n.dot(a)}},{key:"lineDistance",value:function(t,e){return Math.abs(this.lineDistanceSigned(t,e))}},{key:"toString",value:function(){return"("+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+")"}}]),t}());(function(t){t[t["None"]=0]="None",t[t["Line"]=1]="Line",t[t["Circle"]=2]="Circle",t[t["Square"]=3]="Square"})(I||(I={}));var A=function(){function t(e,i,s){Object(o["a"])(this,t),this.from=e,this.to=i,this.drawSelf=!1,this.fractal=s,this.baseShape=I.Line}return Object(p["a"])(t,[{key:"flip",value:function(){var t=this.from;this.from=this.to,this.to=t}},{key:"direction",get:function(){return this.to.clone().sub(this.from)}}]),t}(),J=function(){function t(){Object(o["a"])(this,t),this.shapes=[new A(new H(-1,0),new H(1,0))],this.name="Fractal"}return Object(p["a"])(t,[{key:"lineAmount",value:function(t){if(0==t)return this.shapes.length;var e=0;return this.shapes.forEach((function(t){null!=t.fractal&&e++})),Math.pow(e,t)}},{key:"addShape",value:function(t){this.shapes.push(t)}},{key:"removeShape",value:function(t){var e=this.shapes.indexOf(t);e<0||this.shapes.splice(e,1)}}]),t}();function K(t,e,i,s,n,a){var o=.5*(t+i),r=.5*(e+s),c=i-o,l=s-r,h=l,u=-c;return void 0===a&&(a=new H),a.x=o+n.x*c-n.y*l,a.y=r+n.x*h-n.y*u,a}function Q(){var t=new J,e=new A(new H(-1,0),new H(0,1),t),i=new A(new H(1,0),new H(0,1),t);return t.shapes.pop(),t.shapes.push(e),t.shapes.push(i),t}var Z=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.selectedTab=0,t}return Object(p["a"])(i,[{key:"toggleRecursive",value:function(t){this.state.selectedShape.fractal=t?this.state.selectedFractal:void 0,this.state.onFractalChange.emit()}},{key:"toggleDrawSelf",value:function(t){this.state.selectedShape.drawSelf=t,this.state.onFractalChange.emit()}},{key:"flip",value:function(){this.state.selectedShape.flip(),this.state.onFractalChange.emit()}},{key:"del",value:function(){this.state.deleteSelected(),this.state.onFractalChange.emit()}},{key:"add",value:function(){var t=new A(new H(0,0),new H(.5,0));this.state.selectedFractal.shapes.push(t),this.state.selectShape(t)}},{key:"isRecursive",get:function(){return this.state.hasSelectedShape&&void 0!=this.state.selectedShape.fractal}},{key:"hasDrawSelf",get:function(){var t;return this.state.hasSelectedShape&&(null===(t=this.state.selectedShape)||void 0===t?void 0:t.drawSelf)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],Z.prototype,"state",void 0),Z=Object(l["a"])([Object(h["a"])({components:{Checkbox:O,Dropdown:X}})],Z);var tt=Z,et=tt,it=(i("90b9"),Object(C["a"])(et,G,B,!1,null,"3f92f3ac",null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{ref:"canvas",attrs:{tabindex:"0"},on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,mousedown:t.mouseDown,mouseup:t.mouseUp,mousemove:t.mouseMove,mousewheel:t.mouseWheel,keydown:t.keyDown,keyup:t.keyUp}})},at=[],ot={Normal:"normal",Multiply:"multiply",Screen:"screen",Lighten:"lighten",ColorDodge:"color-dodge",ColorBurn:"color-burn",HardLight:"hard-light",SoftLight:"soft-light",Subtract:"difference",Copy:"copy"},rt={Color:"Color",Gradient:"Gradient",Image:"Image",Transparent:"Transparent"},ct={Color:"Color",Gradient:"Gradient",IterationGradient:"Iteration Gradient"},lt={Pixels:"px",Millimeters:"mm"},ht=function(){function t(){Object(o["a"])(this,t),this.color={type:ct.Color,color:"#22222240"},this.backgroundColor={type:rt.Color,color:"#fff"},this.lineWidth={unit:lt.Pixels,width:1},this.blendMode=ot.Normal,this.color={type:ct.Color,color:"#2e2c2840"}}return Object(p["a"])(t,[{key:"assign",value:function(t){this.color=t.color,this.backgroundColor=t.backgroundColor,this.blendMode=t.blendMode,this.lineWidth=t.lineWidth}},{key:"applyColor",value:function(t,e,i,s){switch(this.color.type){case ct.Color:t.strokeStyle=this.color.color;break;case ct.IterationGradient:t.strokeStyle=this.color.gradient.evaluate(e);break;case ct.Gradient:var n;if(void 0===this.color.gradientCache)this.color.gradientCache=null===(n=this.color.gradient)||void 0===n?void 0:n.toCanvasGradient(t,this.color.gradientFrom,this.color.gradientTo);t.strokeStyle=this.color.gradientCache;break}t.fillStyle=t.strokeStyle}}]),t}(),ut=function(){function t(e,i,s,n){Object(o["a"])(this,t),this.top=i,this.left=e,this.bottom=n,this.right=s}return Object(p["a"])(t,[{key:"x",get:function(){return this.left}},{key:"y",get:function(){return this.top}},{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}}]),t}(),dt=function(){function t(){Object(o["a"])(this,t),this.focalPoint=new H(0,0),this.viewScale=1}return Object(p["a"])(t,[{key:"screenScale",value:function(t,e){return e/2/this.viewScale}},{key:"screenCenterX",value:function(t,e){var i=t/2;return i-=this.screenScale(t,e)*this.focalPoint.x,i}},{key:"screenCenterY",value:function(t,e){var i=e/2;return i+=this.screenScale(t,e)*this.focalPoint.y,i}},{key:"getPixelSize",value:function(t,e){return this.viewScale/e*2}},{key:"applyToContext",value:function(t,e){e.translate(t.width/2,t.height/2),e.scale(t.height/2,t.height/2),e.scale(1/this.viewScale,-1/this.viewScale),e.translate(-this.focalPoint.x,-this.focalPoint.y)}},{key:"getBounds",value:function(t){return new ut(this.focalPoint.x-this.viewScale*t,this.focalPoint.y+this.viewScale,this.focalPoint.x+this.viewScale*t,this.focalPoint.y-this.viewScale)}},{key:"bounds",get:function(){return new ut(this.focalPoint.x-this.viewScale,this.focalPoint.y+this.viewScale,this.focalPoint.x+this.viewScale,this.focalPoint.y-this.viewScale)}}]),t}(),vt=function(){function t(){Object(o["a"])(this,t),this.fractal=void 0,this.settings=new ht,this.window=new dt}return Object(p["a"])(t,[{key:"setFractal",value:function(t){this.fractal=t}},{key:"setSettings",value:function(t){this.settings=t}}]),t}(),ft=function(){function t(){Object(o["a"])(this,t),this.outputFormat="png",this.width=1920,this.height=1080,this.iterations=14,this.dpi=300}return Object(p["a"])(t,[{key:"assign",value:function(t){this.width=t.width,this.height=t.height,this.iterations=t.iterations,this.dpi=t.dpi}}]),t}(),pt=function t(){Object(o["a"])(this,t),this.fractals=[Q()],this.composite=new vt,this.outputSettings=new ft,this.composite.fractal=this.fractals[0]},gt=new pt;function yt(t,e){if(e<=0)return 1;if(void 0===t)return 0;var i=0;return t.shapes.forEach((function(t){t.fractal&&i++})),Math.pow(i,e)+yt(t,e-1)}var bt=function t(e,i,s,n,a,r){Object(o["a"])(this,t),this.fractal=e,this.iterations=i,this.x=s,this.y=n,this.x2=a,this.y2=r},mt=function(){function t(){Object(o["a"])(this,t),this.queue=[],this.length=0;for(var e=0;e<100;e++)this.queue.push(new bt(new J,0,0,0,0,0))}return Object(p["a"])(t,[{key:"pop",value:function(){if(!(this.length<=0))return this.length--,this.queue[this.length]}},{key:"enqueue",value:function(t,e,i,s,n,a){var o=void 0;this.length>=this.queue.length?(o=new bt(t,a,e,i,s,n),this.queue.push(o)):o=this.queue[this.length],o.fractal=t,o.iterations=a,o.x=e,o.y=i,o.x2=s,o.y2=n,this.queue[this.length]=o,this.length++}},{key:"clear",value:function(){this.length=0}}]),t}(),kt=function(){function t(e){Object(o["a"])(this,t),this._animationFrame=-1,this.stepsDone=0,this.stepsEstimate=1,this._fromPointBuffer=new H,this._toPointBuffer=new H,this.context=e,this.queue=new mt,this.settings=new ht}return Object(p["a"])(t,[{key:"renderFractal",value:function(t,e,i,s,n,a){this.reset(),this.enqueueFractal(t,e,i,s,n,a),this.stepsDone=0,this.stepsEstimate=yt(t,a),this.draw()}},{key:"reset",value:function(){this._animationFrame>=0&&clearTimeout(this._animationFrame),this._animationFrame=-1,this.queue.clear()}},{key:"enqueueFractal",value:function(t,e,i,s,n,a){this.queue.enqueue(t,e,i,s,n,a)}},{key:"popFractal",value:function(){if(0!==this.queue.length)for(var t=this.queue.pop(),e=t.fractal,i=t.x,s=t.y,n=t.x2,a=t.y2,o=t.iterations,r=t.iterations<=0,c=0;c<e.shapes.length;c++){var l=e.shapes[c],h=K(i,s,n,a,l.from,this._fromPointBuffer),u=K(i,s,n,a,l.to,this._toPointBuffer);if(l.drawSelf||null==l.fractal||r){if(this.context.beginPath(),this.settings.applyColor(this.context,this.stepsDone/this.stepsEstimate,h,u),l.baseShape===I.Line&&(this.context.moveTo(h.x,h.y),this.context.lineTo(u.x,u.y)),l.baseShape===I.Circle){var d=(h.x+u.x)/2,v=(h.y+u.y)/2,f=h.distance(u)/2;this.context.moveTo(d+f,v),this.context.arc(d,v,f,0,2*Math.PI)}this.context.stroke()}null==l.fractal||r||this.enqueueFractal(l.fractal,h.x,h.y,u.x,u.y,o-1)}}},{key:"drawBackground",value:function(t){this.context.clearRect(t.x,t.y,t.width,t.height);var e=this.settings.backgroundColor;switch(e.type){case rt.Color:this.context.fillStyle=e.color,this.context.fillRect(t.x,t.y,t.width,t.height);break;case rt.Transparent:this.context.clearRect(t.x,t.y,t.width,t.height);break;case rt.Gradient:this.context.fillStyle=e.gradient.toCanvasGradient(this.context,e.gradientFrom,e.gradientTo),this.context.fillRect(t.x,t.y,t.width,t.height);break;case rt.Image:this.context.fillStyle=e.color,this.context.fillRect(t.x,t.y,t.width,t.height),this.context.drawImage(e.image,-1,1,2,-2);break}}},{key:"draw",value:function(){this._animationFrame=-1;var t=0;this.context.lineWidth=this.settings.lineWidth.width,this.context.globalCompositeOperation=this.settings.blendMode;Math.max(this.queue.length,0);while(this.queue.length>0&&t<1e3)this.popFractal(),Math.max(this.queue.length,0),t++,this.stepsDone++;this.context.globalCompositeOperation=ot.Normal,void 0!==this.onRenderStep&&this.onRenderStep(this.stepsDone/this.stepsEstimate*100),this.queue.length>0?this._animationFrame=setTimeout(this.draw.bind(this),0):void 0!==this.onRenderDone&&this.onRenderDone()}}]),t}();function wt(t,e,i,s,n,a){void 0===a&&(a=10),t.beginPath();for(var o=0;o<=a;o++)t.moveTo(e+o/a*s,i),t.lineTo(e+o/a*s,i+n);for(var r=0;r<=a;r++)t.moveTo(e,i+r/a*n),t.lineTo(e+s,i+r/a*n);t.stroke()}function St(t,e,i,s,n){t.beginPath(),t.moveTo(e,i),t.lineTo(e+s,i),t.lineTo(e+s,i+n),t.lineTo(e,i+n),t.lineTo(e,i),t.stroke()}var Ct=i("66cb"),xt=i.n(Ct),Ot=function(){function t(){Object(o["a"])(this,t),this.functions=[]}return Object(p["a"])(t,[{key:"listen",value:function(t){this.functions.push(t)}},{key:"remove",value:function(t){var e=this.functions.indexOf(t);e<0||this.functions.splice(e)}},{key:"emit",value:function(){this.functions.forEach((function(t){return t()}))}}]),t}(),jt=function(){function t(){Object(o["a"])(this,t),this.signals=[]}return Object(p["a"])(t,[{key:"listenTo",value:function(t,e){t.listen(e),this.signals.push({target:t,listener:e})}},{key:"removeAll",value:function(){this.signals.forEach((function(t){return t.target.remove(t.listener)}))}}]),t}(),_t=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.panning=!1,t.dragging=!1,t.snap=!1,t.previousMousePosition=new H,t.compositeScaling=!1,t.compositeWindowOffset=new H,t.bundle=new jt,t}return Object(p["a"])(i,[{key:"mounted",value:function(){this.context=this.$refs.canvas.getContext("2d"),this.renderer=new kt(this.context),this.renderer.settings=gt.composite.settings,this.onStateChange(this.state),this.draw()}},{key:"unmounted",value:function(){this.bundle.removeAll()}},{key:"onStateChange",value:function(t){this.bundle.removeAll(),void 0!==this.state&&(this.bundle.listenTo(this.state.onSelectedPointChange,this.draw.bind(this)),this.bundle.listenTo(this.state.onSelectedShapeChange,this.draw.bind(this)),this.bundle.listenTo(this.state.onSelectedFractalChange,this.draw.bind(this)),this.bundle.listenTo(this.state.onFractalChange,this.draw.bind(this)))}},{key:"mouseEnter",value:function(t){}},{key:"mouseLeave",value:function(t){this.panning=!1,this.dragging=!1}},{key:"mouseMove",value:function(t){var e=this.mouseEventToPoint(t),i=e.x-this.previousMousePosition.x,s=e.y-this.previousMousePosition.y;if(this.panning&&(this.state.editorWindow.focalPoint.x-=i,this.state.editorWindow.focalPoint.y-=s,e.x-=i,e.y-=s,this.draw()),this.dragging&&this.state.hasSelectedPoint)this.state.selectedPoint.assign(e),this.snap&&(this.state.selectedPoint.x=Math.round(this.state.selectedPoint.x*this.state.gridX)/this.state.gridX,this.state.selectedPoint.y=Math.round(this.state.selectedPoint.y*this.state.gridY)/this.state.gridY),this.draw();else if(this.dragging&&this.state.hasSelectedShape){var n=this.state.selectedShape;if(n.from.x+=i,n.from.y+=s,n.to.x+=i,n.to.y+=s,this.snap){var a=this.state.selectedShape.direction;n.from.x=Math.round(n.from.x*this.state.gridX)/this.state.gridX,n.from.y=Math.round(n.from.y*this.state.gridY)/this.state.gridY,n.to.x=n.from.x+a.x,n.to.y=n.from.y+a.y}this.draw()}if(this.dragging&&this.state.hasSelectedComposite){var o=this.state.selectedComposite.window;if(this.compositeScaling){var r=Math.sqrt(2),c=e.clone().sub(o.focalPoint);o.viewScale=c.length()/r}else o.focalPoint.assign(e).sub(this.compositeWindowOffset),console.log(o.focalPoint.toString()),this.snap&&(o.focalPoint.x=Math.round(o.focalPoint.x*this.state.gridX)/this.state.gridX,o.focalPoint.y=Math.round(o.focalPoint.y*this.state.gridY)/this.state.gridY);this.draw()}this.previousMousePosition=e}},{key:"mouseUp",value:function(t){0===t.button&&(this.dragging=!1),1===t.button&&(this.panning=!1)}},{key:"mouseDown",value:function(t){this.canvas.focus(),this.previousMousePosition=this.mouseEventToPoint(t),0===t.button&&(this.dragging=this.select(this.previousMousePosition),this.draw()),1===t.button&&(this.panning=!0)}},{key:"mouseWheel",value:function(t){t.deltaY<0&&(this.state.editorWindow.viewScale/=1/.9),t.deltaY>0&&(this.state.editorWindow.viewScale/=.9),this.draw()}},{key:"keyDown",value:function(t){"Control"===t.key&&(this.snap=!0),"Delete"===t.key&&(this.state.deleteSelected(),this.draw())}},{key:"keyUp",value:function(t){"Control"===t.key&&(this.snap=!1)}},{key:"draw",value:function(){var t=this.$refs.canvas;t.width=t.offsetWidth,t.height=t.offsetHeight,this.context.resetTransform(),this.state.editorWindow.applyToContext(this.canvas,this.context),this.renderer.drawBackground(this.state.editorWindow.getBounds(this.canvas.width/this.canvas.height)),void 0!==this.fractal&&void 0!==this.renderer&&(this.renderer.reset(),this.renderer.settings.lineWidth.width=this.pixelSize,this.renderer.enqueueFractal(this.fractal,-1,0,1,0,this.state.iterations),this.renderer.draw()),this.state.showGrid&&this.drawGrid(),this.state.showVertices&&(this.drawVertices(),this.drawStartingPositions()),this.state.hasSelectedComposite&&this.state.showCanvas&&this.drawCanvas()}},{key:"drawDebug",value:function(){var t=this,e=this.$refs.canvas,i=this.screenPointToWorldPoint(new H(e.width/2,e.height/2)),s=this.state.editorWindow.focalPoint,n=this.previousMousePosition,a=function(e){t.context.beginPath(),t.context.arc(e.x,e.y,10*t.pixelSize,0,2*Math.PI,!1),t.context.stroke()};this.context.lineWidth=2*this.pixelSize,this.context.strokeStyle="red",a(s),this.context.strokeStyle="blue",a(i),this.context.strokeStyle="green",a(n)}},{key:"drawGrid",value:function(){var t=xt()(this.renderer.settings.backgroundColor.color).isDark();this.context.strokeStyle="#0000000f",t&&(this.context.strokeStyle="#ffffff0f"),this.context.lineWidth=this.pixelSize,wt(this.context,-1,-1,2,2,10)}},{key:"drawVertices",value:function(){var t=this;this.context.globalCompositeOperation="normal";var e=function(e){t.context.beginPath(),t.context.arc(e.x,e.y,10*t.pixelSize,0,2*Math.PI,!1),t.context.stroke()};if(void 0!==this.fractal){var i=xt()(this.renderer.settings.backgroundColor.color).isDark();this.fractal.shapes.forEach((function(e){var s=e.from,n=e.to,a=s.clone().add(n).scale(.5),o=n.clone().sub(s).normalize(),r=o.clone().perp();t.context.beginPath(),t.context.lineWidth=t.pixelSize,t.context.strokeStyle="black",i&&(t.context.strokeStyle="white"),t.state.selectedShape==e&&(t.context.strokeStyle="orange"),t.context.moveTo(s.x,s.y),t.context.lineTo(n.x,n.y);var c=8*t.pixelSize;t.context.moveTo(a.x,a.y),t.context.lineTo(a.x-o.x*c+r.x*c,a.y-o.y*c+r.y*c),t.context.moveTo(a.x,a.y),t.context.lineTo(a.x-o.x*c-r.x*c,a.y-o.y*c-r.y*c),t.context.stroke()})),this.context.strokeStyle="orange",this.context.lineWidth=4*this.pixelSize,this.fractal.shapes.forEach((function(i){t.context.strokeStyle="orange",e(i.from),e(i.to)})),this.context.stroke()}}},{key:"drawStartingPositions",value:function(){this.context.strokeStyle="blue",this.context.lineWidth=1*this.pixelSize,this.context.beginPath(),this.context.arc(-1,0,30*this.pixelSize,0,2*Math.PI,!1),this.context.stroke(),this.context.beginPath(),this.context.arc(1,0,30*this.pixelSize,0,2*Math.PI,!1),this.context.stroke()}},{key:"drawCanvas",value:function(){var t=xt()(this.renderer.settings.backgroundColor.color).isDark(),e=this.context,i=this.state.selectedComposite;this.context.strokeStyle="#0000000f",t&&(this.context.strokeStyle="#ffffff0f");var s=i.window.viewScale,n=i.window.focalPoint.x,a=i.window.focalPoint.y,o=16/9;e.lineWidth=this.pixelSize,St(e,n-s,a-s,2*s,2*s),St(e,n-s*o,a-s,2*s*o,2*s);var r=s/5;e.strokeStyle="#000000ff",t&&(e.strokeStyle="#ffffffff"),e.lineWidth=2*this.pixelSize,e.beginPath(),e.moveTo(n-s,a-s),e.lineTo(n-s+r,a-s),e.moveTo(n-s,a-s),e.lineTo(n-s,a-s+r),e.moveTo(n-s,a+s),e.lineTo(n-s+r,a+s),e.moveTo(n-s,a+s),e.lineTo(n-s,a+s-r),e.moveTo(n+s,a+s),e.lineTo(n+s-r,a+s),e.moveTo(n+s,a+s),e.lineTo(n+s,a+s-r),e.moveTo(n+s,a-s),e.lineTo(n+s-r,a-s),e.moveTo(n+s,a-s),e.lineTo(n+s,a-s+r),e.moveTo(n-r/2,a),e.lineTo(n+r/2,a),e.moveTo(n,a-r/2),e.lineTo(n,a+r/2),e.stroke(),e.lineWidth=1*this.pixelSize}},{key:"select",value:function(t){var e=this.state;if(e.hasSelectedComposite){var i=e.selectedComposite.window,s=t.clone().sub(i.focalPoint);return this.compositeWindowOffset.assign(s),this.compositeScaling=s.length()>i.viewScale,!0}if(void 0===this.fractal)return!1;if(!1===e.canEditVertices)return!1;var n=this.fractal,a=10*this.pixelSize,o=a;if(e.hasSelectedShape){var r=t.distance(e.selectedShape.from),c=t.distance(e.selectedShape.to),l=!1;if(r<o&&(e.selectedPoint=e.selectedShape.from,e.selectedShape=e.selectedShape,o=r,l=!0),c<o&&(e.selectedPoint=e.selectedShape.to,e.selectedShape=e.selectedShape,o=c,l=!0),l)return!0}return e.resetSelection(),n.shapes.forEach((function(i){var s=t.distance(i.from),n=t.distance(i.to);s<o&&(e.selectedPoint=i.from,e.selectedShape=i,o=s),n<o&&(e.selectedPoint=i.to,e.selectedShape=i,o=n)})),!!e.hasSelectedPoint||(o=a,n.shapes.forEach((function(i){var s=t.lineDistance(i.from,i.to);s<o&&(e.selectedShape=i,o=s)})),!!e.hasSelectedShape)}},{key:"mouseEventToPoint",value:function(t){return this.screenPointToWorldPoint(new H(t.offsetX,t.offsetY))}},{key:"screenPointToWorldPoint",value:function(t){return new H((t.x-this.viewX)/this.viewWidth,-(t.y-this.viewY)/this.viewWidth)}},{key:"fractal",get:function(){return this.state.selectedFractal}},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"pixelSize",get:function(){return this.state.editorWindow.getPixelSize(this.canvas.width,this.canvas.height)}},{key:"viewWidth",get:function(){return this.state.editorWindow.screenScale(this.canvas.width,this.canvas.height)}},{key:"viewX",get:function(){return this.state.editorWindow.screenCenterX(this.canvas.width,this.canvas.height)}},{key:"viewY",get:function(){return this.state.editorWindow.screenCenterY(this.canvas.width,this.canvas.height)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],_t.prototype,"state",void 0),Object(l["a"])([Object(h["d"])("state")],_t.prototype,"onStateChange",null),_t=Object(l["a"])([h["a"]],_t);var Pt=_t,Tt=Pt,Et=(i("c83a"),Object(C["a"])(Tt,nt,at,!1,null,"5169064e",null)),Mt=Et.exports,Ft=function(){function t(){Object(o["a"])(this,t),this.showVertices=!0,this.showGrid=!1,this.showCanvas=!1,this.canEditVertices=!1,this.canEditCanvas=!1,this.iterations=8,this.selectedPoint=void 0,this.selectedShape=void 0,this.selectedFractal=void 0,this.selectedComposite=void 0,this.gridX=10,this.gridY=10,this.onSelectedPointChange=new Ot,this.onSelectedShapeChange=new Ot,this.onSelectedFractalChange=new Ot,this.onFractalChange=new Ot,this.editorWindow=new dt}return Object(p["a"])(t,[{key:"resetSelection",value:function(){this.selectedPoint=void 0,this.selectedShape=void 0}},{key:"deleteSelected",value:function(){if(this.hasSelectedShape){var t=this.selectedShape;this.selectedFractal.removeShape(t)}}},{key:"selectPoint",value:function(t){this.selectedPoint=t,this.onSelectedPointChange.emit()}},{key:"selectShape",value:function(t){this.selectedShape=t,this.onSelectedShapeChange.emit()}},{key:"selectFractal",value:function(t){this.selectedFractal=t,this.onSelectedFractalChange.emit()}},{key:"hasSelectedComposite",get:function(){return void 0!==this.selectedComposite}},{key:"hasSelectedFractal",get:function(){return void 0!==this.selectedFractal}},{key:"hasSelectedShape",get:function(){return this.hasSelectedFractal&&null!==this.selectedShape&&void 0!==this.selectedShape}},{key:"hasSelectedPoint",get:function(){return this.hasSelectedShape&&null!==this.selectedPoint&&void 0!==this.selectedPoint}}]),t}(),$t=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.state=new Ft,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.state.selectedFractal=gt.fractals[0],this.state.canEditVertices=!0}}]),i}(h["c"]);$t=Object(l["a"])([Object(h["a"])({components:{FractalEditorPreviewSettings:R,FractalWindow:Mt,FractalEditorToolSelection:st}})],$t);var Dt,Vt=$t,Wt=Vt,Rt=(i("38c6"),Object(C["a"])(Wt,v,f,!1,null,"26d26400",null)),Gt=Rt.exports,Bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"fractal-composite"},[i("FractalWindow",{attrs:{state:t.state}}),i("FractalCompositeSettings",{attrs:{state:t.state}})],1)},Nt=[],zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"fractal-composite-settings"},[i("div",{staticClass:"heading"},[t._v(" Composite settings ")]),i("ForegroundStylePicker",{attrs:{settings:t.settings.color},on:{change:t.setForeground}}),i("div",{staticClass:"seperator"}),i("BackgroundStylePicker",{attrs:{settings:t.settings.backgroundColor},on:{change:t.setBackground}}),i("div",{staticClass:"seperator"}),i("div",{staticClass:"settings"},[t._m(0),i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Blend Mode")]),i("Dropdown",{attrs:{selected:t.settings.blendMode,list:t.blendModes},on:{"update:selected":t.setBlendMode}})],1)])],1)},qt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("span",{staticClass:"icon-info"}),t._v(" Blend mode defines how the fractal is blended into the background color ")])}],It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],ref:"root",staticClass:"color-picker",style:{"--hue":t.hue,"--saturation":t.saturation,"--value":t.value,"--opacity":t.opacity,"--color":t.hex},on:{click:t.toggle}},[i("div",{staticClass:"popup",class:{hidden:!t.open},on:{mousedown:t.mouseDown,mouseup:t.mouseUp,mousemove:t.mouseMove,mouseleave:t.mouseLeave}},[i("div",{ref:"satVal",staticClass:"color-hue"}),i("div",{ref:"hue",staticClass:"color-line"}),i("div",{ref:"opacity",staticClass:"opacity-line"},[t._v(t._s(Math.round(100*t.opacity))+"%")]),i("div",{staticClass:"setting"},[i("div",{staticClass:"label"},[t._v("Hex")]),i("input",{attrs:{type:"text"},domProps:{value:t.hex}})]),i("div",{staticClass:"setting button-secondary",on:{click:t.close}},[t._v("Apply")])])])},Lt=[];(function(t){t[t["None"]=0]="None",t[t["SaturationValue"]=1]="SaturationValue",t[t["Hue"]=2]="Hue",t[t["Opacity"]=3]="Opacity"})(Dt||(Dt={}));var Ut=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.internalColor=xt()(t.color),t.hsv=t.internalColor.toHsv(),t.drag=Dt.None,t.open=!1,t}return Object(p["a"])(i,[{key:"watcher",value:function(t){this.internalColor=xt()(t)}},{key:"toggle",value:function(t){t.target===this.$refs.root&&(this.open=!this.open)}},{key:"close",value:function(){this.open=!1}},{key:"mouseUp",value:function(t){this.drag=Dt.None}},{key:"mouseMove",value:function(t){this.drag==Dt.SaturationValue&&this.setSaturationValueMouseEvent(t),this.drag==Dt.Hue&&this.setHueMouseEvent(t),this.drag==Dt.Opacity&&this.setOpacityMouseEvent(t)}},{key:"mouseDown",value:function(t){t.target===this.$refs.satVal&&(this.setSaturationValueMouseEvent(t),this.drag=Dt.SaturationValue,t.preventDefault()),t.target===this.$refs.hue&&(this.setHueMouseEvent(t),this.drag=Dt.Hue,t.preventDefault()),t.target===this.$refs.opacity&&(this.setOpacityMouseEvent(t),this.drag=Dt.Opacity,t.preventDefault())}},{key:"mouseLeave",value:function(t){this.drag=Dt.None}},{key:"setSaturationValueMouseEvent",value:function(t){var e=this.$refs.satVal,i=e.getBoundingClientRect(),s=t.pageX-i.left,n=t.pageY-i.top;this.hsv.s=this.clamp01(s/i.width),this.hsv.v=this.clamp01(1-n/i.height),this.sync()}},{key:"setHueMouseEvent",value:function(t){var e=this.$refs.hue,i=e.getBoundingClientRect(),s=t.pageX-i.left;t.pageY,i.top;this.hsv.h=360*this.clamp01(s/i.width),this.sync()}},{key:"setOpacityMouseEvent",value:function(t){var e=this.$refs.opacity,i=e.getBoundingClientRect(),s=t.pageX-i.left;t.pageY,i.top;this.hsv.a=this.clamp01(s/i.width),this.sync()}},{key:"sync",value:function(){this.internalColor=xt()(this.hsv),this.$emit("update:color",this.rgba),this.$emit("change",this.rgba)}},{key:"clamp01",value:function(t){return t<0?0:t>1?1:t}},{key:"hex",get:function(){return this.internalColor.toHexString()},set:function(t){this.internalColor=xt()(t)}},{key:"rgba",get:function(){return this.internalColor.toRgbString()}},{key:"hue",get:function(){return this.hsv.h}},{key:"saturation",get:function(){return this.hsv.s}},{key:"value",get:function(){return this.hsv.v}},{key:"opacity",get:function(){return this.hsv.a}},{key:"alpha",get:function(){return this.opacity}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])({default:"red"})],Ut.prototype,"color",void 0),Object(l["a"])([Object(h["d"])("color")],Ut.prototype,"watcher",null),Ut=Object(l["a"])([h["a"]],Ut);var Yt=Ut,Xt=Yt,Ht=(i("d3f9"),Object(C["a"])(Xt,It,Lt,!1,null,"14befc6a",null)),At=Ht.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background-style"},[i("div",{staticClass:"settings"},[i("div",{staticClass:"info label"},[t._v(" Foreground ")]),i("div",{staticClass:"info"},[t._v(" Set the fractals color here. ")]),i("div",{staticClass:"setting"},[i("span",[t._v("Type")]),i("Dropdown",{attrs:{selected:t.selected,list:t.types},on:{change:t.selectType}})],1),t.selected==t.types.Color?i("div",{staticClass:"settings-group"},[i("div",{staticClass:"setting"},[i("span",[t._v("Color")]),i("ColorPicker",{attrs:{color:t.settings.color},on:{change:t.setColor}})],1)]):t._e(),t.selected==t.types.Gradient?i("div",{staticClass:"settings-group"},[i("GradientPicker",{attrs:{gradient:t.gradient},on:{change:t.setGradient}})],1):t._e()])])},Kt=[],Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gradient-picker"},[i("div",{staticClass:"setting canvas"},[t._l(t.self.stops,(function(e,s){return i("div",{key:s,staticClass:"gradient-stop",class:{selected:t.selectedStop===e},style:{left:100*e.position+"%"}})})),i("canvas",{ref:"canvas",staticClass:"gradient",on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,mousedown:t.mouseDown,mouseup:t.mouseUp,dblclick:t.doubleClick,mousemove:t.mouseMove}})],2),t.hasSelectedStop?i("div",{staticClass:"setting-group"},[i("div",{staticClass:"setting"},[i("span",[t._v("Color")]),i("ColorPicker",{attrs:{color:t.selectedStop.color},on:{change:t.setColor}})],1),i("div",{staticClass:"setting"},[t._v(" "+t._s(t.selectedStop.position)+" ")]),i("div",{staticClass:"setting"},[i("div",{staticClass:"button-secondary",on:{click:t.deleteStop}},[t._v("Delete")])])]):i("div",{staticClass:"setting-group info"},[t._v(" No stop selected. ")])])},Zt=[],te=(i("c740"),function(){function t(e,i){Object(o["a"])(this,t),this._color=xt()(i),this.position=e}return Object(p["a"])(t,[{key:"getColor",value:function(){return this._color}},{key:"color",get:function(){return this._color.toRgbString()},set:function(t){this._color=xt()(t)}}]),t}()),ee=function(){function t(){Object(o["a"])(this,t),this.stops=[]}return Object(p["a"])(t,[{key:"clone",value:function(){var e=new t;return this.stops.forEach((function(t){e.addStop(t.position,t.color)})),e}},{key:"sort",value:function(){this.stops.sort((function(t,e){return t.position-e.position}))}},{key:"normalize",value:function(){if(!(this.stops.length<=1)){this.sort();var t=this.stops[this.stops.length-1].position;0!==t&&this.stops.forEach((function(e){return e.position/=t}))}}},{key:"evaluate",value:function(t){if(1===this.stops.length)return this.stops[0].color;var e=this.findIndex(t),i=this.stops[e];if(e+1>=this.stops.length)return i.color;var s=this.stops[e+1];if(i.position===s.position)return i.color;var n=(t-i.position)/(s.position-i.position);return n<0&&(n=0),n>1&&(n=1),xt.a.mix(i.color,s.color,n).toHexString()}},{key:"findIndex",value:function(t){for(var e=this.stops.length-1;e>0;e--)if(t>this.stops[e].position)return e;return 0}},{key:"addRawStop",value:function(t){return this.stops.push(t),this.sort(),this}},{key:"addStop",value:function(t,e){return this.stops.push(new te(t,e)),this}},{key:"removeStop",value:function(t){var e=this.stops.indexOf(t);console.log("found stop at index : "+e),e<0||this.removeStopByIndex(e)}},{key:"removeStopByIndex",value:function(t){console.log("splicing at index : "+t),this.stops.splice(t,1)}},{key:"toCanvasGradient",value:function(t,e,i){var s=t.createLinearGradient(e.x,e.y,i.x,i.y);return this.stops.forEach((function(t){s.addColorStop(t.position,t.color)})),s}}]),t}();function ie(t,e){var i=new ee;return i.addStop(0,t),i.addStop(1,e),i}var se=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.self=new ee,t.selectedStop=null,t.padding=!1,t.dragging=!1,t.previousMousePosition=new H,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.self=this.gradient.clone()}},{key:"mounted",value:function(){this.context=this.canvas.getContext("2d"),this.draw()}},{key:"setColor",value:function(t){this.selectedStop.color=t,this.$emit("change",this.self),this.draw()}},{key:"draw",value:function(){if(void 0!==this.context){this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.self.toCanvasGradient(this.context,new H(0,0),new H(this.canvas.width,0));this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}}},{key:"deleteStop",value:function(){this.self.stops.length<=1||(console.log("deleting..."),this.self.removeStop(this.selectedStop),this.selectedStop=null,this.$emit("change",this.self),this.draw())}},{key:"mouseEnter",value:function(t){}},{key:"mouseLeave",value:function(t){this.dragging=!1}},{key:"mouseMove",value:function(t){var e=this.mouseEventToPoint(t);e.x,this.previousMousePosition.x,e.y,this.previousMousePosition.y;this.dragging&&null!==this.selectedStop&&(this.selectedStop.position=e.x,this.self.sort(),this.$emit("change",this.self),this.draw()),this.previousMousePosition=e}},{key:"mouseUp",value:function(t){0===t.button&&(this.dragging=!1)}},{key:"mouseDown",value:function(t){this.canvas.focus(),this.previousMousePosition=this.mouseEventToPoint(t),0===t.button&&(this.dragging=this.select(this.previousMousePosition),this.draw())}},{key:"doubleClick",value:function(t){if(0===t.button){var e=this.mouseEventToPoint(t);e.x<0&&(e.x=0),e.x>1&&(e.x=1),this.selectedStop=new te(e.x,this.gradient.evaluate(e.x)),this.self.addRawStop(this.selectedStop)}}},{key:"select",value:function(t){var e=.1,i=null;return this.self.stops.forEach((function(s){var n=Math.abs(s.position-t.x);n<e&&(e=n,i=s)})),this.selectedStop=i,!0}},{key:"mouseEventToPoint",value:function(t){return new H(t.offsetX/this.canvas.width,0)}},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"hasSelectedStop",get:function(){return null!==this.selectedStop}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],se.prototype,"gradient",void 0),se=Object(l["a"])([Object(h["a"])({components:{ColorPicker:At}})],se);var ne=se,ae=ne,oe=(i("52d0"),Object(C["a"])(ae,Qt,Zt,!1,null,"2d128892",null)),re=oe.exports,ce=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.types=ct,t.selected=ct.Color,t.gradient=new ee,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.internalSettings=this.settings,this.gradient=ie("#000","#fff"),void 0===this.internalSettings.gradient?this.internalSettings.gradient=this.gradient:this.gradient=this.internalSettings.gradient,void 0===this.internalSettings.gradientTo&&(this.internalSettings.gradientTo=new H(1,-1)),void 0===this.internalSettings.gradientFrom&&(this.internalSettings.gradientFrom=new H(-1,1)),this.selected=this.internalSettings.type}},{key:"setColor",value:function(t){this.internalSettings.color=t,this.$emit("change",this.internalSettings)}},{key:"setGradient",value:function(t){this.gradient=t.clone(),this.internalSettings.gradient=this.gradient,this.internalSettings.gradientCache=void 0,this.$emit("change",this.internalSettings)}},{key:"selectType",value:function(t){this.selected=t,this.internalSettings.type=t,this.$emit("change",this.internalSettings)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],ce.prototype,"settings",void 0),ce=Object(l["a"])([Object(h["a"])({components:{Dropdown:X,ColorPicker:At,GradientPicker:re}})],ce);var le=ce,he=le,ue=(i("bde9"),Object(C["a"])(he,Jt,Kt,!1,null,"084096be",null)),de=ue.exports,ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background-style"},[i("div",{staticClass:"settings"},[i("div",{staticClass:"info label"},[t._v(" Background ")]),i("div",{staticClass:"info"},[t._v(" Set the background color, gradient or image here. ")]),i("div",{staticClass:"setting"},[i("span",[t._v("Type")]),i("Dropdown",{attrs:{selected:t.selected,list:t.types},on:{change:t.selectType}})],1),t.selected==t.types.Color?i("div",{staticClass:"settings-group"},[i("div",{staticClass:"setting"},[i("span",[t._v("Color")]),i("ColorPicker",{attrs:{color:t.settings.color},on:{change:t.setColor}})],1)]):t._e(),t.selected==t.types.Gradient?i("div",{staticClass:"settings-group"},[i("GradientPicker",{attrs:{gradient:t.gradient},on:{change:t.setGradient}})],1):t._e(),t.selected==t.types.Image?i("div",{staticClass:"settings-group"},[i("div",{staticClass:"setting"},[i("span",[t._v("Color")]),i("ColorPicker",{attrs:{color:t.settings.color},on:{change:t.setColor}})],1),i("div",{staticClass:"setting"},[i("input",{ref:"fileUpload",staticClass:"hidden",attrs:{accept:"image/*",type:"file"},on:{change:t.fileAdded}}),i("span",{staticClass:"thumbnail-container"},[i("img",{staticClass:"thumbnail",attrs:{src:t.imageSrc,alt:""}}),i("span",{staticClass:"name"},[t._v(" "+t._s(t.imgName)+" ")])]),i("span",{staticClass:"button-secondary upload-button",on:{click:t.upload}},[i("span",{staticClass:"icon-upload"})])])]):t._e()])])},fe=[],pe=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.types=rt,t.selected=rt.Color,t.gradient=new ee,t.imgName="",t.imageSrc="",t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.internalSettings=this.settings,this.gradient=ie("#000","#fff"),void 0===this.internalSettings.gradient?this.internalSettings.gradient=this.gradient:this.gradient=this.internalSettings.gradient,void 0===this.internalSettings.gradientTo&&(this.internalSettings.gradientTo=new H(1,-1)),void 0===this.internalSettings.gradientFrom&&(this.internalSettings.gradientFrom=new H(-1,1)),void 0!==this.internalSettings.image&&(this.imageSrc=this.internalSettings.image.src),this.selected=this.internalSettings.type}},{key:"upload",value:function(){this.$refs.fileUpload.click()}},{key:"fileAdded",value:function(){var t=this;if(null!==this.$refs.fileUpload.files&&void 0!==this.$refs.fileUpload.files&&!(this.$refs.fileUpload.files.length<=0)){var e=this.$refs.fileUpload.files[0];this.imgName=e.name;var i=new FileReader;i.onload=function(e){var i,s=new Image;t.imageSrc=null===(i=e.target)||void 0===i?void 0:i.result,s.onload=function(){t.$emit("change",t.internalSettings)},s.src=t.imageSrc,t.internalSettings.image=s},i.readAsDataURL(e)}}},{key:"setColor",value:function(t){this.internalSettings.color=t,this.$emit("change",this.internalSettings)}},{key:"setGradient",value:function(t){this.gradient=t.clone(),this.internalSettings.gradient=this.gradient,this.$emit("change",this.internalSettings)}},{key:"selectType",value:function(t){this.selected=t,this.internalSettings.type=t,this.$emit("change",this.internalSettings)}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],pe.prototype,"settings",void 0),pe=Object(l["a"])([Object(h["a"])({components:{Dropdown:X,ColorPicker:At,GradientPicker:re}})],pe);var ge=pe,ye=ge,be=(i("930e"),Object(C["a"])(ye,ve,fe,!1,null,"c7a9473a",null)),me=be.exports,ke=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.blendModes=ot,t.bundle=new jt,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.settings=gt.composite.settings}},{key:"mount",value:function(){this.bundle.listenTo(this.state.onSelectedShapeChange,this.$forceUpdate.bind(this))}},{key:"unmount",value:function(){this.bundle.removeAll()}},{key:"setBackground",value:function(t){this.settings.backgroundColor=t,this.state.onFractalChange.emit()}},{key:"setForeground",value:function(t){this.settings.color=t,this.state.onFractalChange.emit()}},{key:"setBlendMode",value:function(t){this.settings.blendMode=t,this.state.onFractalChange.emit()}}]),i}(h["c"]);Object(l["a"])([Object(h["b"])()],ke.prototype,"state",void 0),ke=Object(l["a"])([Object(h["a"])({components:{ColorPicker:At,Dropdown:X,BackgroundStylePicker:me,ForegroundStylePicker:de}})],ke);var we=ke,Se=we,Ce=(i("8d8e"),Object(C["a"])(Se,zt,qt,!1,null,"aa10246a",null)),xe=Ce.exports,Oe=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.state=new Ft,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.state.selectedFractal=gt.fractals[0],this.state.showVertices=!1,this.state.showGrid=!0,this.state.showCanvas=!0,this.state.selectedComposite=gt.composite,this.state.iterations=10}}]),i}(h["c"]);Oe=Object(l["a"])([Object(h["a"])({components:{FractalWindow:Mt,FractalCompositeSettings:xe}})],Oe);var je=Oe,_e=je,Pe=(i("034c"),Object(C["a"])(_e,Bt,Nt,!1,null,"b5e83c88",null)),Te=Pe.exports,Ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"fractal-render"},[i("canvas",{ref:"canvas",attrs:{width:"0",height:"0"}}),i("div",{staticClass:"background",style:{background:t.backgroundColor}}),i("div",{staticClass:"ui-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.renderTab,expression:"!renderTab"}],staticClass:"ui"},[i("div",{staticClass:"heading"},[t._v(" Output Settings ")]),i("div",{staticClass:"settings"},[i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Width")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"width"}],class:{invalid:!t.widthValid},attrs:{type:"text"},domProps:{value:t.width},on:{keyup:t.onChange,input:function(e){e.target.composing||(t.width=e.target.value)}}})]),i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Height")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],class:{invalid:!t.heightValid},attrs:{type:"text"},domProps:{value:t.height},on:{keyup:t.onChange,input:function(e){e.target.composing||(t.height=e.target.value)}}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.widthValid||!t.heightValid,expression:"!widthValid || !heightValid"}],staticClass:"info error"},[i("span",{staticClass:"icon-error"}),t._v(" Please enter a valid width and height ")]),i("div",{staticClass:"seperator"}),i("div",{staticClass:"setting"},[i("span",{staticClass:"label"},[t._v("Iterations")]),i("NumberSelector",{attrs:{value:t.output.iterations},on:{"update:value":function(e){return t.$set(t.output,"iterations",e)}}})],1),t._m(0)]),i("div",{staticClass:"footer"},[i("div",{staticClass:"empty"}),i("div",{staticClass:"body"},[i("div",{staticClass:"info"},[t._v(" "+t._s(t.fileSizeEstimate)+" • "+t._s(t.durationEstimate)+" ")]),i("div",{staticClass:"button-primary",class:{disabled:!t.valid},on:{click:t.startRender}},[t._v(" Render ")])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.renderTab,expression:"renderTab"}],staticClass:"ui"},[i("div",{staticClass:"heading"},[t._v(" Rendering... ")]),i("div",{staticClass:"loader"},[i("svg",{attrs:{width:"240px",height:"240px",viewBox:"-1 -1 2 2"}},[i("circle",{staticClass:"progress-background",attrs:{"stroke-width":"0.08",fill:"transparent",r:"0.9",cx:"0",cy:"0"}}),i("circle",{staticClass:"progress-done",style:{"--progress":t.progress},attrs:{transform:"rotate(-90)",stroke:"red","stroke-width":"0.08",fill:"transparent",r:"0.9",cx:"0",cy:"0"}})]),i("div",{staticClass:"percentage"},[t._v(t._s(Math.round(t.progress))+"%")])]),i("div",{staticClass:"footer"},[i("div",{staticClass:"button-secondary",on:{click:t.cancelRender}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.rendering,expression:"rendering"}]},[t._v("Cancel")]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.rendering,expression:"!rendering"}]},[t._v("Back")])]),i("div",{staticClass:"body"},[i("div",{staticClass:"info"},[i("span",[t._v("Auto download")]),i("Checkbox",{attrs:{checked:t.autoDownload},on:{"update:checked":function(e){t.autoDownload=e}}})],1),i("div",{staticClass:"button-primary",class:{disabled:t.rendering},on:{click:t.download}},[i("span",{staticClass:"icon-download"}),t._v(" Download ")])])])])])])},Me=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("span",{staticClass:"icon-info"}),t._v(" Increasing the number of iterations results in a higher quality render, but also results in greater rendering times. ")])}],Fe=(i("4d63"),i("ac1f"),i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),$e=2200/2073600,De=6e4,Ve=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.output=new ft,t.width="",t.height="",t.widthValid=!0,t.heightValid=!0,t.renderTab=!1,t.rendering=!1,t.autoDownload=!1,t.progress=0,t}return Object(p["a"])(i,[{key:"beforeMount",value:function(){this.output=gt.outputSettings,this.width=""+this.output.width,this.height=""+this.output.height}},{key:"onChange",value:function(){var t=new RegExp(/^[0-9]*$/,"s");this.widthValid=t.test(this.width),this.heightValid=t.test(this.height),this.widthValid&&(this.output.width=parseFloat(this.width)),this.heightValid&&(this.output.height=parseFloat(this.height))}},{key:"startRender",value:function(){this.rendering=!0,this.renderTab=!0;var t=gt.composite;this.canvas.width=this.output.width,this.canvas.height=this.output.height;var e=this.canvas.getContext("2d");this.renderer=new kt(e),this.renderer.settings=t.settings,this.renderer.onRenderStep=this.onProgress.bind(this),this.renderer.onRenderDone=this.onDone.bind(this),e.resetTransform(),t.window.applyToContext(this.canvas,e),this.renderer.drawBackground(t.window.getBounds(this.output.width/this.output.height)),this.renderer.reset(),this.renderer.settings.lineWidth.width=t.window.getPixelSize(this.canvas.width,this.canvas.height),this.renderer.renderFractal(t.fractal,-1,0,1,0,this.output.iterations)}},{key:"cancelRender",value:function(){var t;this.renderTab=!1,this.rendering=!1,null===(t=this.renderer)||void 0===t||t.reset()}},{key:"onProgress",value:function(t){this.progress=t}},{key:"onDone",value:function(){var t=Object(Fe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==this.canvas){t.next=2;break}return t.abrupt("return");case 2:if(this.rendering=!1,!this.autoDownload){t.next=6;break}return t.next=6,this.download();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"download",value:function(){var t=Object(Fe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==this.canvas){t.next=2;break}return t.abrupt("return");case 2:if(!this.rendering){t.next=4;break}return t.abrupt("return");case 4:this.canvas.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="",e.click()}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"valid",get:function(){return this.widthValid&&this.heightValid}},{key:"durationEstimate",get:function(){var t=yt(gt.composite.fractal,this.output.iterations),e=t/De,i=60,s=60*i,n=Math.floor(e/s);e-=s*n;var a=Math.floor(e/i);e-=a*i;var o=Math.floor(e),r=""+n,c=""+a,l=""+o;return r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),l.length<2&&(l="0"+l),r+":"+c+":"+l}},{key:"fileSizeEstimate",get:function(){var t=this.output.width*this.output.height*$e;return t>1e6?Math.round(t/1e5)/10+"GB":t>1e3?Math.round(t/100)/10+"MB":Math.round(10*t)/10+"KB"}},{key:"backgroundColor",get:function(){return gt.composite.settings.backgroundColor?gt.composite.settings.backgroundColor:"#fff"}}]),i}(h["c"]);Ve=Object(l["a"])([Object(h["a"])({components:{NumberSelector:F,Checkbox:O}})],Ve);var We=Ve,Re=We,Ge=(i("a04a"),Object(C["a"])(Re,Ee,Me,!1,null,"5f925136",null)),Be=Ge.exports,Ne=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.selectedTab=0,t}return i}(h["c"]);Ne=Object(l["a"])([Object(h["a"])({components:{FractalEditor:Gt,FractalComposite:Te,FractalRender:Be}})],Ne);var ze=Ne,qe=ze,Ie=(i("6658"),Object(C["a"])(qe,u,d,!1,null,"f985cb2a",null)),Le=Ie.exports,Ue=function(t){Object(r["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(o["a"])(this,i),e.apply(this,arguments)}return i}(h["c"]);Ue=Object(l["a"])([Object(h["a"])({components:{Editor:Le}})],Ue);var Ye=Ue,Xe=Ye,He=(i("5c0b"),Object(C["a"])(Xe,n,a,!1,null,null,null)),Ae=He.exports;s["a"].config.productionTip=!1,s["a"].directive("click-outside",{bind:function(t,e,i){t.clickOutsideEvent=function(s){t==s.target||t.contains(s.target)||i.context[e.expression](s)},document.body.addEventListener("click",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}}),new s["a"]({render:function(t){return t(Ae)}}).$mount("#app")},d119:function(t,e,i){},d3f9:function(t,e,i){"use strict";var s=i("eedc"),n=i.n(s);n.a},ecd4:function(t,e,i){},eedc:function(t,e,i){},f250:function(t,e,i){"use strict";var s=i("ecd4"),n=i.n(s);n.a}});
//# sourceMappingURL=app.47bfe7db.js.map